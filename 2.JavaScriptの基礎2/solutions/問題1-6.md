## 問題

6. 12 時間形式で入力された時刻を 24 時間形式に変換できる関数を作成してください。

- AMとPMのチェックはendwith関数というものがあるらしい?

- 一桁の場合は最初に0がつきますが..?

```js
// Example
convertTo24HrsFormat("12:10AM"); // 00:10
convertTo24HrsFormat("5:00AM"); // 05:00
convertTo24HrsFormat("12:33PM"); // 12:33
convertTo24HrsFormat("01:59PM"); // 13:59
convertTo24HrsFormat("11:8PM"); // 23:08
convertTo24HrsFormat("10:02PM"); // 22:02
```

```js
function convertTo24HrsFormat(str){
    //strを24時間形式に変換して返す
    //
}
```

## 解答例

```js
function convertTo24HrsFormat(str){
  if (str.endsWith("AM")) {
    const time = str.slice(0, -2).split(":");
    let hours = time[0];
    let minutes = time[1];
    if (hours === "12") {
        hours = "00";
    }
    if (hours.length === 1) {
      hours = "0" + hours;
    }
    if (minutes.length === 1) {
      minutes = "0" + minutes;
    }
    return hours + ":" + minutes;
  } else if (str.endsWith("PM")) {
    const time = str.slice(0, -2).split(":");
    let hours = time[0];
    let minutes = time[1];
    if (hours !== "12") {
      hours = (parseInt(hours) + 12).toString();
    }
    if (minutes.length === 1) {
      minutes = "0" + minutes;
    }
    return hours + ":" + minutes;
  }
}

convertTo24HrsFormat("12:10AM"); // 00:10
convertTo24HrsFormat("5:00AM"); // 05:00
convertTo24HrsFormat("12:33PM"); // 12:33
convertTo24HrsFormat("01:59PM"); // 13:59
convertTo24HrsFormat("11:8PM"); // 23:08
convertTo24HrsFormat("10:02PM"); // 22:02
```

まず、AMとPMは午前と午後とは少し違うことに注意しましょう。
0:00(24時間表記)は12:00AMかつ午前0:00、12:00(24時間表記)は12:00PMかつ午後0:00です。

関数の始めでは[`endsWith()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith)関数で`"AM"`か`"PM"`かの判定をしています。`"AM"`のときの`if`の中では、時や分が一桁だったときと、時が`12`だったときの例外処理をしています。`"PM"`のときは、PM12時は24時間表記でも12時なので、それ以外の時に数字を12増やす必要があります。分については`"AM"`のときと同じです。

この「一桁だった時に先頭に0を付ける」という操作は合計で3箇所ある(`"PM"`のときの時は必ず`12`以上なので考えなくていい)ので、この操作をする関数を別に定義する(ここでは`zeroPadding()`とする)とより簡潔に書くことができます。

また、その関数の中身自体もより簡潔に書くことができます。(ここからかなり長くなるので、余裕がない場合はまず上の内容を理解できるようにしましょう。)

```js
function zeroPadding(str) {
  const result = ("0" + str).slice(-2);
  return result;
}

console.log(zeroPadding("10")); // "10"
console.log(zeroPadding("1")); // "01"
```

このように、先頭に0を付けてから終わりの2文字を取り出すことで、数字が1桁でも2桁でも、2桁にそろえることができます。

また、[`padStart()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)という関数を使うことでさらに短くすることもできます。(ちなみに僕は知りませんでした。)

```js
function zeroPadding(str) {
  const result = str.padStart(2, "0");
  return result;
}

console.log(zeroPadding("10")); // "10"
console.log(zeroPadding("1")); // "01"
```

[`padStart()`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)の使い方は、この青くなっている文字をクリックして確認してください。リンク先になっている[MDN Web Docs](https://developer.mozilla.org/ja/)はとても便利なサイトなので、使い方が分からないJavaScriptの関数などがあったときはここで調べると良いです。

また、[三項演算子](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Operators/Conditional_operator)というものを使って、12時台だった時の処理を短く書くこともできます。

```js
function nabeatsu(num) {
  const result = num % 3 === 0 ? "アホ" : "普通";
  return result;
}

console.log(nabeatsu(5)); // "普通"
console.log(nabeatsu(6)); // "アホ"
```

上に書いたコードは、引数が3の倍数なら`"アホ"`を返し、そうでないなら`"普通"`を返す関数です(元ネタが分からなかったらごめんね)。

構文は下の通りです。

```
[条件式] ? [条件式が真(true)のときの値] : [条件式が偽(false)のときの値]
```

上の関数は、`if`を使うと

```js
function nabeatsu(num) {
  let result;
  // =を使わずに右に何も書かないと、値はundefined、つまり未定義になります。
  // constで同じことをすると再代入ができないのでエラーが出ます。
  if (num % 3 === 0) {
    result = "アホ";
  } else {
    result = "普通";
  }
  return result;
}
```

と同じ意味になりますが、三項演算子を使うことで`let`を使わずに済みます。

しかし、世の中には三項演算子許さない派の人も多数いるので気を付けましょう。
僕は使ってもいいと思います。

ここまでのことを踏まえて、コードを書き換えてみます。

### 別解(上の内容を読んでから見るのをオススメします)

```js
function zeroPadding(str) {
  const result = str.padStart(2, "0");
  return result;
}

function convertTo24HrsFormat(str) {
  const time = str.slice(0, -2).split(":");
  if (str.endsWith("AM")) {
    const hours = time[0] === "12" ? "00" : zeroPadding(time[0]);
    const minutes = zeroPadding(time[1]);
    return hours + ":" + minutes;
  } else if (str.endsWith("PM")) {
    const hours = time[0] === "12" ? "12" : (parseInt(time[0]) + 12).toString();
    const minutes = zeroPadding(time[1]);
    return hours + ":" + minutes;
  }
}

convertTo24HrsFormat("12:10AM"); // 00:10
convertTo24HrsFormat("5:00AM"); // 05:00
convertTo24HrsFormat("12:33PM"); // 12:33
convertTo24HrsFormat("01:59PM"); // 13:59
convertTo24HrsFormat("11:8PM"); // 23:08
convertTo24HrsFormat("10:02PM"); // 22:02
```

最後に、もし再び頭のおかしい人がやってきて、この関数に"12:00FM","25:80","( ᐛ)ﾊﾞﾅﾅ"などの訳のわからない文字列を渡してきたらエラーが発生するかもしれません。余力があれば、これらを弾くための例外処理も考えてみてください。今までと比べて難易度はかなり高いです。
